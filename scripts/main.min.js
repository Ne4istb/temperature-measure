"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){function e(){var e=new i,t=new a(e),r=new n(e,t),o=document.getElementById("add");o.addEventListener("click",function(){r.show()});var s=document.getElementById("clear-button");s.addEventListener("click",function(){e.clear(),t.drawChart([])})}var t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||t)&&navigator.serviceWorker.register("service-worker.js").then(function(e){e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)});var n=function(){function e(t,n){_classCallCheck(this,e),this._storage=t,this._chart=n,this._dialog=document.getElementById("add-dialog"),this._initButtons(),this._initTemperatureInput(),this._initDateDialog(),this._initTimeDialog(),this._resetForm()}return _createClass(e,[{key:"show",value:function(){this._dialog.classList.remove("hidden"),this._resetForm()}},{key:"hide",value:function(){this._dialog.classList.add("hidden"),this._resetForm()}},{key:"_resetForm",value:function(){this._selectedDate=this._selectedTime=moment(),this._dateLabel.textContent=this._selectedDate.format("DD.MM.YYYY"),this._timeLabel.textContent=this._selectedTime.format("h:mm"),this._temperature.value=36.6}},{key:"_initButtons",value:function(){var e=this,t=document.getElementById("close");t.addEventListener("click",function(){return e._onClose()});var n=document.getElementById("apply");n.addEventListener("click",function(){return e._onApply()})}},{key:"_onClose",value:function(){this.hide()}},{key:"_onApply",value:function(){var e=this._getTemperature();if(e){var t=moment().set("year",this._selectedDate.get("year")).set("month",this._selectedDate.get("month")).set("date",this._selectedDate.get("date")).set("hour",this._selectedTime.get("hour")).set("minute",this._selectedTime.get("minute")),n={temperature:e,time:t.format()};this._storage.saveRecord(n);var i=this._storage.getRecords();this._chart.drawChart(i),this.hide()}}},{key:"_getTemperature",value:function(){return this._temperature.value}},{key:"_initTemperatureInput",value:function(){this._temperature=document.getElementById("temperature")}},{key:"_initDateDialog",value:function(){var e=this,t=new mdDateTimePicker["default"]({type:"date"}),n=document.querySelector("#date button");n.addEventListener("click",function(){t.toggle()}),this._dateLabel=document.querySelector("#date span"),t.trigger=this._dateLabel,this._dateLabel.addEventListener("onOk",function(){e._dateLabel.textContent=t.time.format("DD.MM.YYYY"),e._selectedDate=t.time})}},{key:"_initTimeDialog",value:function(){var e=this,t=new mdDateTimePicker["default"]({type:"time"}),n=document.querySelector("#time button");n.addEventListener("click",function(){t.toggle()}),this._timeLabel=document.querySelector("#time span"),t.trigger=this._timeLabel,this._timeLabel.addEventListener("onOk",function(){e._timeLabel.textContent=t.time.format("h:mm"),e._selectedTime=t.time})}}]),e}(),i=function(){function e(){_classCallCheck(this,e),this._key="data"}return _createClass(e,[{key:"getRecords",value:function(){var e=window.localStorage.getItem(this._key),t=[];return e&&(t=JSON.parse(e)),t}},{key:"saveRecord",value:function(e){var t=this.getRecords();t.push(e),window.localStorage.setItem(this._key,JSON.stringify(t))}},{key:"clear",value:function(){window.localStorage.removeItem(this._key)}}]),e}(),a=function(){function e(t){_classCallCheck(this,e),this._ctx=document.getElementById("temperature-chart");var n=t.getRecords();this.drawChart(n)}return _createClass(e,[{key:"drawChart",value:function(e){var t=e.map(function(e){return{y:e.temperature,x:e.time}}).sort(function(e,t){return e.x>t.x?1:e.x<t.x?-1:0});this._chart=new Chart(this._ctx,{type:"line",data:{datasets:[{data:t,fill:!1,cubicInterpolationMode:"monotone",borderColor:"rgb(255, 126, 70)",pointBorderColor:"rgb(255,215,64)"}]},options:{legend:{display:!1},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{type:"time",time:{displayFormats:{quarter:"MMM YYYY hh:mm"}}}],yAxes:[{ticks:{max:42,min:35}}]}}})}}]),e}();e()}();
//# sourceMappingURL=main.min.js.map
