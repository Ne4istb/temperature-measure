{"version":3,"sources":["main.min.js","main.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","init","storage","Storage","chart","ChartComponent","addDialog","AddDialog","showDialogButton","document","getElementById","addEventListener","show","clearButton","clear","drawChart","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","console","error","this","_storage","_chart","_dialog","_initButtons","_initTemperatureInput","_initDateDialog","_initTimeDialog","value","classList","remove","_resetForm","add","_selectedDate","_selectedTime","moment","_dateLabel","textContent","format","_timeLabel","_temperature","_this","closeButton","_onClose","applyButton","_onApply","hide","temperature","_getTemperature","time","set","get","data","saveRecord","records","getRecords","_this2","dateDialog","mdDateTimePicker","type","dateButton","querySelector","toggle","trigger","_this3","timeDialog","timeButton","_key","localStorage","getItem","JSON","parse","record","push","setItem","stringify","removeItem","_ctx","map","item","y","x","sort","item1","item2","Chart","datasets","fill","cubicInterpolationMode","borderColor","pointBorderColor","options","legend","display","responsive","maintainAspectRatio","scales","xAxes","displayFormats","quarter"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict';var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}} /* eslint-env browser */\n(function () {\n    'use strict';\n\n    // Check to make sure service workers are supported in the current browser,\n    // and that the current page is accessed from a secure origin. Using a\n    // service worker from an insecure origin will trigger JS console errors. See\n    // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n    var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\n\n\n    if ('serviceWorker' in navigator && (\n    window.location.protocol === 'https:' || isLocalhost)) {\n        navigator.serviceWorker.register('service-worker.js').\n        then(function (registration) {\n            // updatefound is fired if service-worker.js changes.\n            registration.onupdatefound = function () {\n                // updatefound is also fired the very first time the SW is installed,\n                // and there's no need to prompt for a reload at that point.\n                // So check here to see if the page is already controlled,\n                // i.e. whether there's an existing service worker.\n                if (navigator.serviceWorker.controller) {\n                    // The updatefound event implies that registration.installing is set:\n                    // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n                    var installingWorker = registration.installing;\n\n                    installingWorker.onstatechange = function () {\n                        switch (installingWorker.state) {\n                            case 'installed':\n                                // At this point, the old content will have been purged and the\n                                // fresh content will have been added to the cache.\n                                // It's the perfect time to display a \"New content is\n                                // available; please refresh.\" message in the page's interface.\n                                break;\n\n                            case 'redundant':\n                                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n                            default:\n                            // Ignore\n                        }\n                    };\n                }\n            };\n        }).catch(function (e) {\n            console.error('Error during service worker registration:', e);\n        });\n    }\n    /* eslint-disable */var\n\n    AddDialog = function () {\n\n        function AddDialog(storage, chart) {_classCallCheck(this, AddDialog);\n\n            this._storage = storage;\n            this._chart = chart;\n\n            this._dialog = document.getElementById('add-dialog');\n\n            this._initButtons();\n            this._initTemperatureInput();\n            this._initDateDialog();\n            this._initTimeDialog();\n        }_createClass(AddDialog, [{ key: 'show', value: function show()\n\n            {\n                this._dialog.classList.remove('hidden');\n                this._resetForm();\n            } }, { key: 'hide', value: function hide()\n\n            {\n                this._dialog.classList.add('hidden');\n                this._resetForm();\n            } }, { key: '_resetForm', value: function _resetForm()\n\n            {\n                this._selectedDate = this._selectedTime = moment();\n\n                this._dateLabel.textContent = this._selectedDate.format('DD.MM.YYYY');\n                this._timeLabel.textContent = this._selectedTime.format('h:mm');\n\n                this._temperature.value = 36.6;\n            } }, { key: '_initButtons', value: function _initButtons()\n\n            {var _this = this;\n                var closeButton = document.getElementById('close');\n                closeButton.addEventListener('click', function () {return _this._onClose();});\n\n                var applyButton = document.getElementById('apply');\n                applyButton.addEventListener('click', function () {return _this._onApply();});\n            } }, { key: '_onClose', value: function _onClose()\n\n            {\n                this.hide();\n            } }, { key: '_onApply', value: function _onApply()\n\n            {\n\n                var temperature = this._getTemperature();\n\n                if (!temperature)\n                return;\n\n                var time = moment().\n                set('year', this._selectedDate.get('year')).\n                set('month', this._selectedDate.get('month')).\n                set('day', this._selectedDate.get('day')).\n                set('hour', this._selectedTime.get('hour')).\n                set('minute', this._selectedTime.get('minute'));\n\n                var data = {\n                    temperature: temperature,\n                    time: time.format() };\n\n\n                this._storage.saveRecord(data);\n\n                var records = this._storage.getRecords();\n                this._chart.drawChart(records);\n\n                this.hide();\n            } }, { key: '_getTemperature', value: function _getTemperature()\n\n            {\n                return this._temperature.value;\n            } }, { key: '_initTemperatureInput', value: function _initTemperatureInput()\n\n            {\n                this._temperature = document.getElementById('temperature');\n            } }, { key: '_initDateDialog', value: function _initDateDialog()\n\n            {var _this2 = this;\n                var dateDialog = new mdDateTimePicker.default({ type: 'date' });\n                var dateButton = document.querySelector('#date button');\n                dateButton.addEventListener('click', function () {\n                    dateDialog.toggle();\n                });\n\n                this._dateLabel = document.querySelector('#date span');\n                dateDialog.trigger = this._dateLabel;\n                this._dateLabel.addEventListener('onOk', function () {\n                    _this2._dateLabel.textContent = dateDialog.time.format('DD.MM.YYYY');\n                    _this2._selectedDate = dateDialog.time;\n                });\n            } }, { key: '_initTimeDialog', value: function _initTimeDialog()\n\n            {var _this3 = this;\n                var timeDialog = new mdDateTimePicker.default({ type: 'time' });\n                var timeButton = document.querySelector('#time button');\n                timeButton.addEventListener('click', function () {\n                    timeDialog.toggle();\n                });\n\n                this._timeLabel = document.querySelector('#time span');\n                timeDialog.trigger = this._timeLabel;\n                this._timeLabel.addEventListener('onOk', function () {\n                    _this3._timeLabel.textContent = timeDialog.time.format('h:mm');\n                    _this3._selectedTime = timeDialog.time;\n                });\n            } }]);return AddDialog;}();var\n\n\n    Storage = function () {\n\n        function Storage() {_classCallCheck(this, Storage);\n            this._key = 'data';\n        }_createClass(Storage, [{ key: 'getRecords', value: function getRecords()\n\n            {\n                var data = window.localStorage.getItem(this._key);\n\n                var records = [];\n\n                if (data)\n                records = JSON.parse(data);\n\n                return records;\n            } }, { key: 'saveRecord', value: function saveRecord(\n\n            record) {\n                var records = this.getRecords();\n                records.push(record);\n\n                window.localStorage.setItem(this._key, JSON.stringify(records));\n            } }, { key: 'clear', value: function clear()\n\n            {\n                window.localStorage.removeItem(this._key);\n            } }]);return Storage;}();var\n\n\n    ChartComponent = function () {\n        function ChartComponent(storage) {_classCallCheck(this, ChartComponent);\n\n            this._ctx = document.getElementById('temperature-chart');\n            var records = storage.getRecords();\n            this.drawChart(records);\n        }_createClass(ChartComponent, [{ key: 'drawChart', value: function drawChart(\n\n            records) {\n\n                var data = records.\n                map(function (item) {\n                    return { y: item.temperature, x: item.time };\n                }).\n                sort(function (item1, item2) {\n                    if (item1.x > item2.x) return 1;\n                    if (item1.x < item2.x) return -1;\n                    return 0;\n                });\n\n                this._chart = new Chart(this._ctx, {\n                    type: 'line',\n                    data: {\n                        datasets: [{\n                            data: data,\n                            fill: false,\n                            cubicInterpolationMode: 'monotone',\n                            borderColor: 'rgb(255, 126, 70)',\n                            pointBorderColor: 'rgb(255,215,64)' }] },\n\n\n                    options: {\n                        legend: {\n                            display: false },\n\n                        responsive: true,\n                        maintainAspectRatio: false,\n                        scales: {\n                            xAxes: [{\n                                type: 'time',\n                                time: {\n                                    displayFormats: {\n                                        quarter: 'MMM YYYY hh:mm' } } }] } } });\n\n\n\n\n\n\n            } }]);return ChartComponent;}();\n\n\n    init();\n\n    function init() {\n\n        var storage = new Storage();\n        var chart = new ChartComponent(storage);\n        var addDialog = new AddDialog(storage, chart);\n\n        var showDialogButton = document.getElementById('add');\n        showDialogButton.addEventListener('click', function () {\n            addDialog.show();\n        });\n\n        var clearButton = document.getElementById('clear-button');\n        clearButton.addEventListener('click', function () {\n            storage.clear();\n            chart.drawChart([]);\n        });\n    }\n\n    /* eslint-enable */\n})();\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNMb2NhbGhvc3QiLCJCb29sZWFuIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm1hdGNoIiwibmF2aWdhdG9yIiwicHJvdG9jb2wiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIiwicmVnaXN0cmF0aW9uIiwib251cGRhdGVmb3VuZCIsImNvbnRyb2xsZXIiLCJpbnN0YWxsaW5nV29ya2VyIiwiaW5zdGFsbGluZyIsIm9uc3RhdGVjaGFuZ2UiLCJzdGF0ZSIsIkVycm9yIiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwiQWRkRGlhbG9nIiwic3RvcmFnZSIsImNoYXJ0IiwiX3N0b3JhZ2UiLCJfY2hhcnQiLCJfZGlhbG9nIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIl9pbml0QnV0dG9ucyIsIl9pbml0VGVtcGVyYXR1cmVJbnB1dCIsIl9pbml0RGF0ZURpYWxvZyIsIl9pbml0VGltZURpYWxvZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsIl9yZXNldEZvcm0iLCJhZGQiLCJfc2VsZWN0ZWREYXRlIiwiX3NlbGVjdGVkVGltZSIsIm1vbWVudCIsIl9kYXRlTGFiZWwiLCJ0ZXh0Q29udGVudCIsImZvcm1hdCIsIl90aW1lTGFiZWwiLCJfdGVtcGVyYXR1cmUiLCJ2YWx1ZSIsImNsb3NlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbkNsb3NlIiwiYXBwbHlCdXR0b24iLCJfb25BcHBseSIsImhpZGUiLCJ0ZW1wZXJhdHVyZSIsIl9nZXRUZW1wZXJhdHVyZSIsInRpbWUiLCJzZXQiLCJnZXQiLCJkYXRhIiwic2F2ZVJlY29yZCIsInJlY29yZHMiLCJnZXRSZWNvcmRzIiwiZHJhd0NoYXJ0IiwiZGF0ZURpYWxvZyIsIm1kRGF0ZVRpbWVQaWNrZXIiLCJkZWZhdWx0IiwidHlwZSIsImRhdGVCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlIiwidHJpZ2dlciIsInRpbWVEaWFsb2ciLCJ0aW1lQnV0dG9uIiwiU3RvcmFnZSIsIl9rZXkiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwicmVjb3JkIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJyZW1vdmVJdGVtIiwiQ2hhcnRDb21wb25lbnQiLCJfY3R4IiwibWFwIiwieSIsIml0ZW0iLCJ4Iiwic29ydCIsIml0ZW0xIiwiaXRlbTIiLCJDaGFydCIsImRhdGFzZXRzIiwiZmlsbCIsImN1YmljSW50ZXJwb2xhdGlvbk1vZGUiLCJib3JkZXJDb2xvciIsInBvaW50Qm9yZGVyQ29sb3IiLCJvcHRpb25zIiwibGVnZW5kIiwiZGlzcGxheSIsInJlc3BvbnNpdmUiLCJtYWludGFpbkFzcGVjdFJhdGlvIiwic2NhbGVzIiwieEF4ZXMiLCJkaXNwbGF5Rm9ybWF0cyIsInF1YXJ0ZXIiLCJpbml0IiwiYWRkRGlhbG9nIiwic2hvd0RpYWxvZ0J1dHRvbiIsInNob3ciLCJjbGVhckJ1dHRvbiIsImNsZWFyIl0sIm1hcHBpbmdzIjoid3NCQUFBO0FBQ0EsQ0FBQyxZQUFXO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFJQSxjQUFjQyxRQUFRQyxPQUFPQyxRQUFQLENBQWdCQyxRQUFoQixLQUE2QixXQUE3QjtBQUN0QjtBQUNBRixXQUFPQyxRQUFQLENBQWdCQyxRQUFoQixLQUE2QixPQUZQO0FBR3RCO0FBQ0FGLFdBQU9DLFFBQVAsQ0FBZ0JDLFFBQWhCLENBQXlCQyxLQUF6QjtBQUNFLDREQURGLENBSmMsQ0FBbEI7Ozs7QUFTQSxRQUFJLG1CQUFtQkMsU0FBbkI7QUFDQ0osV0FBT0MsUUFBUCxDQUFnQkksUUFBaEIsS0FBNkIsUUFBN0IsSUFBeUNQLFdBRDFDLENBQUosRUFDNEQ7QUFDMURNLGtCQUFVRSxhQUFWLENBQXdCQyxRQUF4QixDQUFpQyxtQkFBakM7QUFDQ0MsWUFERCxDQUNNLFVBQVNDLFlBQVQsRUFBdUI7QUFDM0I7QUFDQUEseUJBQWFDLGFBQWIsR0FBNkIsWUFB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TEMsNkNBQXFCLEtBTGhCO0FBTUxDLGdDQUFRO0FBQ0pDLG1DQUFPLENBQUM7QUFDSnZDLHNDQUFNLE1BREY7QUFFSlgsc0NBQU07QUFDRm1ELG9EQUFnQjtBQUNaQyxpREFBUyxnQkFERyxFQURkLEVBRkYsRUFBRCxDQURILEVBTkgsRUFYc0IsRUFBckIsQ0FBZDs7Ozs7OztBQTZCSCxhQXRQRzs7O0FBeVBSQzs7QUFFQSxhQUFTQSxJQUFULEdBQWdCOztBQUVaLFlBQU1yRixVQUFVLElBQUlrRCxPQUFKLEVBQWhCO0FBQ0EsWUFBTWpELFFBQVEsSUFBSTRELGNBQUosQ0FBbUI3RCxPQUFuQixDQUFkO0FBQ0EsWUFBTXNGLFlBQVksSUFBSXZGLFNBQUosQ0FBY0MsT0FBZCxFQUF1QkMsS0FBdkIsQ0FBbEI7O0FBRUEsWUFBTXNGLG1CQUFtQmxGLFNBQVNDLGNBQVQsQ0FBd0IsS0FBeEIsQ0FBekI7QUFDQWlGLHlCQUFpQjlELGdCQUFqQixDQUFrQyxPQUFsQyxFQUEyQyxZQUFNO0FBQzdDNkQsc0JBQVVFLElBQVY7QUFDSCxTQUZEOztBQUlBLFlBQU1DLGNBQWNwRixTQUFTQyxjQUFULENBQXdCLGNBQXhCLENBQXBCO0FBQ0FtRixvQkFBWWhFLGdCQUFaLENBQTZCLE9BQTdCLEVBQXNDLFlBQU07QUFDeEN6QixvQkFBUTBGLEtBQVI7QUFDQXpGLGtCQUFNc0MsU0FBTixDQUFnQixFQUFoQjtBQUNILFNBSEQ7QUFJSDs7QUFFRDtBQUNILENBOVFEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIENoZWNrIHRvIG1ha2Ugc3VyZSBzZXJ2aWNlIHdvcmtlcnMgYXJlIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBicm93c2VyLFxuICAvLyBhbmQgdGhhdCB0aGUgY3VycmVudCBwYWdlIGlzIGFjY2Vzc2VkIGZyb20gYSBzZWN1cmUgb3JpZ2luLiBVc2luZyBhXG4gIC8vIHNlcnZpY2Ugd29ya2VyIGZyb20gYW4gaW5zZWN1cmUgb3JpZ2luIHdpbGwgdHJpZ2dlciBKUyBjb25zb2xlIGVycm9ycy4gU2VlXG4gIC8vIGh0dHA6Ly93d3cuY2hyb21pdW0ub3JnL0hvbWUvY2hyb21pdW0tc2VjdXJpdHkvcHJlZmVyLXNlY3VyZS1vcmlnaW5zLWZvci1wb3dlcmZ1bC1uZXctZmVhdHVyZXNcbiAgdmFyIGlzTG9jYWxob3N0ID0gQm9vbGVhbih3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XG4gICAgICAvLyBbOjoxXSBpcyB0aGUgSVB2NiBsb2NhbGhvc3QgYWRkcmVzcy5cbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ1s6OjFdJyB8fFxuICAgICAgLy8gMTI3LjAuMC4xLzggaXMgY29uc2lkZXJlZCBsb2NhbGhvc3QgZm9yIElQdjQuXG4gICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUubWF0Y2goXG4gICAgICAgIC9eMTI3KD86XFwuKD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KSl7M30kL1xuICAgICAgKVxuICAgICk7XG5cbiAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IgJiZcbiAgICAgICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonIHx8IGlzTG9jYWxob3N0KSkge1xuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzZXJ2aWNlLXdvcmtlci5qcycpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVnaXN0cmF0aW9uKSB7XG4gICAgICAvLyB1cGRhdGVmb3VuZCBpcyBmaXJlZCBpZiBzZXJ2aWNlLXdvcmtlci5qcyBjaGFuZ2VzLlxuICAgICAgcmVnaXN0cmF0aW9uLm9udXBkYXRlZm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdXBkYXRlZm91bmQgaXMgYWxzbyBmaXJlZCB0aGUgdmVyeSBmaXJzdCB0aW1lIHRoZSBTVyBpcyBpbnN0YWxsZWQsXG4gICAgICAgIC8vIGFuZCB0aGVyZSdzIG5vIG5lZWQgdG8gcHJvbXB0IGZvciBhIHJlbG9hZCBhdCB0aGF0IHBvaW50LlxuICAgICAgICAvLyBTbyBjaGVjayBoZXJlIHRvIHNlZSBpZiB0aGUgcGFnZSBpcyBhbHJlYWR5IGNvbnRyb2xsZWQsXG4gICAgICAgIC8vIGkuZS4gd2hldGhlciB0aGVyZSdzIGFuIGV4aXN0aW5nIHNlcnZpY2Ugd29ya2VyLlxuICAgICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICAgIC8vIFRoZSB1cGRhdGVmb3VuZCBldmVudCBpbXBsaWVzIHRoYXQgcmVnaXN0cmF0aW9uLmluc3RhbGxpbmcgaXMgc2V0OlxuICAgICAgICAgIC8vIGh0dHBzOi8vc2xpZ2h0bHlvZmYuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvc3BlYy9zZXJ2aWNlX3dvcmtlci9pbmRleC5odG1sI3NlcnZpY2Utd29ya2VyLWNvbnRhaW5lci11cGRhdGVmb3VuZC1ldmVudFxuICAgICAgICAgIHZhciBpbnN0YWxsaW5nV29ya2VyID0gcmVnaXN0cmF0aW9uLmluc3RhbGxpbmc7XG5cbiAgICAgICAgICBpbnN0YWxsaW5nV29ya2VyLm9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoaW5zdGFsbGluZ1dvcmtlci5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlICdpbnN0YWxsZWQnOlxuICAgICAgICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHRoZSBvbGQgY29udGVudCB3aWxsIGhhdmUgYmVlbiBwdXJnZWQgYW5kIHRoZVxuICAgICAgICAgICAgICAgIC8vIGZyZXNoIGNvbnRlbnQgd2lsbCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGNhY2hlLlxuICAgICAgICAgICAgICAgIC8vIEl0J3MgdGhlIHBlcmZlY3QgdGltZSB0byBkaXNwbGF5IGEgXCJOZXcgY29udGVudCBpc1xuICAgICAgICAgICAgICAgIC8vIGF2YWlsYWJsZTsgcGxlYXNlIHJlZnJlc2guXCIgbWVzc2FnZSBpbiB0aGUgcGFnZSdzIGludGVyZmFjZS5cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdyZWR1bmRhbnQnOlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGluc3RhbGxpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzZXJ2aWNlIHdvcmtlciBiZWNhbWUgcmVkdW5kYW50LicpO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uOicsIGUpO1xuICAgIH0pO1xuICB9XG4gICAgLyogZXNsaW50LWRpc2FibGUgKi9cbiAgICBcbiAgICBjbGFzcyBBZGREaWFsb2cge1xuICAgICAgICBcbiAgICAgICAgY29uc3RydWN0b3Ioc3RvcmFnZSwgY2hhcnQpe1xuICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBzdG9yYWdlO1xuICAgICAgICAgICAgdGhpcy5fY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fZGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1kaWFsb2cnKTtcbiAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9pbml0QnV0dG9ucygpO1xuICAgICAgICAgICAgdGhpcy5faW5pdFRlbXBlcmF0dXJlSW5wdXQoKTtcbiAgICAgICAgICAgIHRoaXMuX2luaXREYXRlRGlhbG9nKCk7XG4gICAgICAgICAgICB0aGlzLl9pbml0VGltZURpYWxvZygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzaG93KCl7XG4gICAgICAgICAgICB0aGlzLl9kaWFsb2cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLl9yZXNldEZvcm0oKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaGlkZSgpe1xuICAgICAgICAgICAgdGhpcy5fZGlhbG9nLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5fcmVzZXRGb3JtKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIF9yZXNldEZvcm0oKXtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkRGF0ZSA9IHRoaXMuX3NlbGVjdGVkVGltZSA9IG1vbWVudCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9kYXRlTGFiZWwudGV4dENvbnRlbnQgPSB0aGlzLl9zZWxlY3RlZERhdGUuZm9ybWF0KCdERC5NTS5ZWVlZJyk7XG4gICAgICAgICAgICB0aGlzLl90aW1lTGFiZWwudGV4dENvbnRlbnQgPSB0aGlzLl9zZWxlY3RlZFRpbWUuZm9ybWF0KCdoOm1tJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3RlbXBlcmF0dXJlLnZhbHVlID0gMzYuNjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgX2luaXRCdXR0b25zKCkge1xuICAgICAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2UnKTtcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnRoaXMuX29uQ2xvc2UoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGFwcGx5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGx5Jyk7XG4gICAgICAgICAgICBhcHBseUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT50aGlzLl9vbkFwcGx5KCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBfb25DbG9zZSgpe1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIF9vbkFwcGx5KCl7XG5cbiAgICAgICAgICAgIGxldCB0ZW1wZXJhdHVyZSA9IHRoaXMuX2dldFRlbXBlcmF0dXJlKCk7XG4gICAgXG4gICAgICAgICAgICBpZiAoIXRlbXBlcmF0dXJlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHRpbWUgPSBtb21lbnQoKVxuICAgICAgICAgICAgICAgIC5zZXQoJ3llYXInLCB0aGlzLl9zZWxlY3RlZERhdGUuZ2V0KCd5ZWFyJykpXG4gICAgICAgICAgICAgICAgLnNldCgnbW9udGgnLCB0aGlzLl9zZWxlY3RlZERhdGUuZ2V0KCdtb250aCcpKVxuICAgICAgICAgICAgICAgIC5zZXQoJ2RheScsIHRoaXMuX3NlbGVjdGVkRGF0ZS5nZXQoJ2RheScpKVxuICAgICAgICAgICAgICAgIC5zZXQoJ2hvdXInLCB0aGlzLl9zZWxlY3RlZFRpbWUuZ2V0KCdob3VyJykpXG4gICAgICAgICAgICAgICAgLnNldCgnbWludXRlJywgdGhpcy5fc2VsZWN0ZWRUaW1lLmdldCgnbWludXRlJykpO1xuICAgIFxuICAgICAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmUgOiB0ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aW1lLmZvcm1hdCgpXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5zYXZlUmVjb3JkKGRhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZWNvcmRzID0gdGhpcy5fc3RvcmFnZS5nZXRSZWNvcmRzKCk7XG4gICAgICAgICAgICB0aGlzLl9jaGFydC5kcmF3Q2hhcnQocmVjb3Jkcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIF9nZXRUZW1wZXJhdHVyZSgpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBlcmF0dXJlLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBfaW5pdFRlbXBlcmF0dXJlSW5wdXQoKXtcbiAgICAgICAgICAgIHRoaXMuX3RlbXBlcmF0dXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBlcmF0dXJlJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIF9pbml0RGF0ZURpYWxvZygpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVEaWFsb2cgPSBuZXcgbWREYXRlVGltZVBpY2tlci5kZWZhdWx0KHsgdHlwZTogJ2RhdGUnIH0pO1xuICAgICAgICAgICAgY29uc3QgZGF0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlIGJ1dHRvbicpO1xuICAgICAgICAgICAgZGF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgZGF0ZURpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9kYXRlTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZSBzcGFuJyk7XG4gICAgICAgICAgICBkYXRlRGlhbG9nLnRyaWdnZXIgPSB0aGlzLl9kYXRlTGFiZWw7XG4gICAgICAgICAgICB0aGlzLl9kYXRlTGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignb25PaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRlTGFiZWwudGV4dENvbnRlbnQgPSBkYXRlRGlhbG9nLnRpbWUuZm9ybWF0KCdERC5NTS5ZWVlZJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWREYXRlID0gZGF0ZURpYWxvZy50aW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIF9pbml0VGltZURpYWxvZygpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVEaWFsb2cgPSBuZXcgbWREYXRlVGltZVBpY2tlci5kZWZhdWx0KHsgdHlwZTogJ3RpbWUnIH0pO1xuICAgICAgICAgICAgY29uc3QgdGltZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lIGJ1dHRvbicpO1xuICAgICAgICAgICAgdGltZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aW1lRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3RpbWVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lIHNwYW4nKTtcbiAgICAgICAgICAgIHRpbWVEaWFsb2cudHJpZ2dlciA9IHRoaXMuX3RpbWVMYWJlbDtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdvbk9rJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVMYWJlbC50ZXh0Q29udGVudCA9IHRpbWVEaWFsb2cudGltZS5mb3JtYXQoJ2g6bW0nKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFRpbWUgPSB0aW1lRGlhbG9nLnRpbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjbGFzcyBTdG9yYWdlIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgICAgICB0aGlzLl9rZXkgPSAnZGF0YSc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGdldFJlY29yZHMoKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuX2tleSk7XG4gICAgXG4gICAgICAgICAgICBsZXQgcmVjb3JkcyA9IFtdO1xuICAgIFxuICAgICAgICAgICAgaWYgKGRhdGEpXG4gICAgICAgICAgICAgICAgcmVjb3JkcyA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByZWNvcmRzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzYXZlUmVjb3JkKHJlY29yZCl7XG4gICAgICAgICAgICBjb25zdCByZWNvcmRzID0gdGhpcy5nZXRSZWNvcmRzKCk7XG4gICAgICAgICAgICByZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuX2tleSwgSlNPTi5zdHJpbmdpZnkocmVjb3JkcykpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjbGVhcigpe1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuX2tleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY2xhc3MgQ2hhcnRDb21wb25lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcihzdG9yYWdlKSB7XG5cbiAgICAgICAgICAgIHRoaXMuX2N0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wZXJhdHVyZS1jaGFydCcpO1xuICAgICAgICAgICAgY29uc3QgcmVjb3JkcyA9IHN0b3JhZ2UuZ2V0UmVjb3JkcygpO1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2hhcnQocmVjb3Jkcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRyYXdDaGFydChyZWNvcmRzKXtcbiAgICBcbiAgICAgICAgICAgIGxldCBkYXRhID0gcmVjb3Jkc1xuICAgICAgICAgICAgLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB5OiBpdGVtLnRlbXBlcmF0dXJlLCB4OiBpdGVtLnRpbWUgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydCgoaXRlbTEsIGl0ZW0yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0xLnggPiBpdGVtMi54KSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbTEueCA8IGl0ZW0yLngpIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgdGhpcy5fY2hhcnQgPSBuZXcgQ2hhcnQodGhpcy5fY3R4LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldHM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdWJpY0ludGVycG9sYXRpb25Nb2RlOiAnbW9ub3RvbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICdyZ2IoMjU1LCAxMjYsIDcwKScsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludEJvcmRlckNvbG9yOiAncmdiKDI1NSwyMTUsNjQpJyxcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4QXhlczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGltZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Rm9ybWF0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhcnRlcjogJ01NTSBZWVlZIGhoOm1tJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGluaXQoKTtcbiAgICBcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IG5ldyBTdG9yYWdlKCk7XG4gICAgICAgIGNvbnN0IGNoYXJ0ID0gbmV3IENoYXJ0Q29tcG9uZW50KHN0b3JhZ2UpO1xuICAgICAgICBjb25zdCBhZGREaWFsb2cgPSBuZXcgQWRkRGlhbG9nKHN0b3JhZ2UsIGNoYXJ0KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNob3dEaWFsb2dCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkJyk7XG4gICAgICAgIHNob3dEaWFsb2dCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBhZGREaWFsb2cuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyLWJ1dHRvbicpO1xuICAgICAgICBjbGVhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgICAgIGNoYXJ0LmRyYXdDaGFydChbXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIGVzbGludC1lbmFibGUgKi9cbn0pKCk7XG4iXX0=\n","/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n    /* eslint-disable */\n    \n    class AddDialog {\n        \n        constructor(storage, chart){\n        \n            this._storage = storage;\n            this._chart = chart;\n            \n            this._dialog = document.getElementById('add-dialog');\n        \n            this._initButtons();\n            this._initTemperatureInput();\n            this._initDateDialog();\n            this._initTimeDialog();\n        }\n        \n        show(){\n            this._dialog.classList.remove('hidden');\n            this._resetForm();\n        }\n        \n        hide(){\n            this._dialog.classList.add('hidden');\n            this._resetForm();\n        }\n        \n        _resetForm(){\n            this._selectedDate = this._selectedTime = moment();\n            \n            this._dateLabel.textContent = this._selectedDate.format('DD.MM.YYYY');\n            this._timeLabel.textContent = this._selectedTime.format('h:mm');\n            \n            this._temperature.value = 36.6;\n        }\n        \n        _initButtons() {\n            const closeButton = document.getElementById('close');\n            closeButton.addEventListener('click', ()=>this._onClose());\n            \n            const applyButton = document.getElementById('apply');\n            applyButton.addEventListener('click', ()=>this._onApply());\n        }\n        \n        _onClose(){\n            this.hide();\n        }\n        \n        _onApply(){\n\n            let temperature = this._getTemperature();\n    \n            if (!temperature)\n                return;\n            \n            let time = moment()\n                .set('year', this._selectedDate.get('year'))\n                .set('month', this._selectedDate.get('month'))\n                .set('day', this._selectedDate.get('day'))\n                .set('hour', this._selectedTime.get('hour'))\n                .set('minute', this._selectedTime.get('minute'));\n    \n            let data = {\n                temperature : temperature,\n                time: time.format()\n            };\n    \n            this._storage.saveRecord(data);\n            \n            const records = this._storage.getRecords();\n            this._chart.drawChart(records);\n            \n            this.hide();\n        }\n    \n        _getTemperature(){\n            return this._temperature.value;\n        }\n        \n        _initTemperatureInput(){\n            this._temperature = document.getElementById('temperature');\n        }\n        \n        _initDateDialog() {\n            const dateDialog = new mdDateTimePicker.default({ type: 'date' });\n            const dateButton = document.querySelector('#date button');\n            dateButton.addEventListener('click', function(){\n                dateDialog.toggle();\n            });\n            \n            this._dateLabel = document.querySelector('#date span');\n            dateDialog.trigger = this._dateLabel;\n            this._dateLabel.addEventListener('onOk', () => {\n                this._dateLabel.textContent = dateDialog.time.format('DD.MM.YYYY');\n                this._selectedDate = dateDialog.time;\n            });\n        }\n        \n        _initTimeDialog() {\n            const timeDialog = new mdDateTimePicker.default({ type: 'time' });\n            const timeButton = document.querySelector('#time button');\n            timeButton.addEventListener('click', function () {\n                timeDialog.toggle();\n            });\n            \n            this._timeLabel = document.querySelector('#time span');\n            timeDialog.trigger = this._timeLabel;\n            this._timeLabel.addEventListener('onOk', () => {\n                this._timeLabel.textContent = timeDialog.time.format('h:mm');\n                this._selectedTime = timeDialog.time;\n            });\n        }\n    }\n    \n    class Storage {\n        \n        constructor(){\n            this._key = 'data';\n        }\n        \n        getRecords() {\n            const data = window.localStorage.getItem(this._key);\n    \n            let records = [];\n    \n            if (data)\n                records = JSON.parse(data);\n            \n            return records;\n        }\n        \n        saveRecord(record){\n            const records = this.getRecords();\n            records.push(record);\n            \n            window.localStorage.setItem(this._key, JSON.stringify(records));\n        }\n        \n        clear(){\n            window.localStorage.removeItem(this._key);\n        }\n    }\n    \n    class ChartComponent {\n        constructor(storage) {\n\n            this._ctx = document.getElementById('temperature-chart');\n            const records = storage.getRecords();\n            this.drawChart(records);\n        }\n        \n        drawChart(records){\n    \n            let data = records\n            .map(item => {\n                return { y: item.temperature, x: item.time };\n            })\n            .sort((item1, item2) => {\n                if (item1.x > item2.x) return 1;\n                if (item1.x < item2.x) return -1;\n                return 0;\n            });\n    \n            this._chart = new Chart(this._ctx, {\n                type: 'line',\n                data: {\n                    datasets: [{\n                        data: data,\n                        fill: false,\n                        cubicInterpolationMode: 'monotone',\n                        borderColor: 'rgb(255, 126, 70)',\n                        pointBorderColor: 'rgb(255,215,64)',\n                    }]\n                },\n                options: {\n                    legend: {\n                        display: false\n                    },\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        xAxes: [{\n                            type: 'time',\n                            time: {\n                                displayFormats: {\n                                    quarter: 'MMM YYYY hh:mm'\n                                }\n                            }\n                        }]\n                    }\n                }\n            });\n        }\n    }\n    \n    init();\n    \n    function init() {\n        \n        const storage = new Storage();\n        const chart = new ChartComponent(storage);\n        const addDialog = new AddDialog(storage, chart);\n        \n        const showDialogButton = document.getElementById('add');\n        showDialogButton.addEventListener('click', () => {\n            addDialog.show();\n        });\n        \n        const clearButton = document.getElementById('clear-button');\n        clearButton.addEventListener('click', () => {\n            storage.clear();\n            chart.drawChart([]);\n        });\n    }\n\n    /* eslint-enable */\n})();\n"]}